# -*- mode: snippet -*-
# key: logdef
# name: logdef
# --
my \$logfile = \$0;
\$logfile =~ s!.*/!!;   
if (\$ENV{DEBUG} eq 'true') {
    sub debug(@) {
        print STDERR "\$logfile: @_\n";
    }
} else {
    open(my \$debug, ">", glob("~/.logs/\$logfile.log"))
        or die "Can not open debug log file ~/.logs/\$logfile.log";
    sub debug(@) {
        print \$debug "@_\n";
    }
}
$0